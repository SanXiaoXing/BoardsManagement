---
// æœ€ç®€åŒ–çš„æµ‹è¯•é¡µé¢ï¼Œç”¨äºéªŒè¯ Serverless éƒ¨ç½²
export const prerender = false;

const timestamp = new Date().toISOString();
const environment = {
  nodeEnv: process.env.NODE_ENV,
  vercel: process.env.VERCEL,
  vercelEnv: process.env.VERCEL_ENV
};

// ç®€å•çš„ç¯å¢ƒå˜é‡æ£€æŸ¥
const hasSupabaseUrl = !!(import.meta.env.PUBLIC_SUPABASE_URL || process.env.PUBLIC_SUPABASE_URL);
const hasSupabaseKey = !!(import.meta.env.PUBLIC_SUPABASE_ANON_KEY || process.env.PUBLIC_SUPABASE_ANON_KEY);
---

<html lang="zh-CN">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width" />
    <title>éƒ¨ç½²æµ‹è¯•é¡µé¢</title>
    <style>
      body {
        font-family: system-ui, sans-serif;
        max-width: 800px;
        margin: 0 auto;
        padding: 2rem;
        background: #1a1a1a;
        color: #fff;
      }
      .status {
        padding: 1rem;
        margin: 1rem 0;
        border-radius: 8px;
        border: 1px solid #333;
      }
      .success { background: rgba(0, 255, 0, 0.1); border-color: #0f0; }
      .error { background: rgba(255, 0, 0, 0.1); border-color: #f00; }
      .info { background: rgba(0, 100, 255, 0.1); border-color: #06f; }
      pre { background: #2a2a2a; padding: 1rem; border-radius: 4px; overflow-x: auto; }
    </style>
  </head>
  <body>
    <h1>ğŸ§ª Serverless éƒ¨ç½²æµ‹è¯•</h1>
    
    <div class="status success">
      <h2>âœ… åŸºæœ¬åŠŸèƒ½æ­£å¸¸</h2>
      <p>é¡µé¢æˆåŠŸæ¸²æŸ“ï¼ŒServerless å‡½æ•°è¿è¡Œæ­£å¸¸</p>
      <p><strong>æ—¶é—´æˆ³:</strong> {timestamp}</p>
    </div>

    <div class="status info">
      <h2>ğŸŒ ç¯å¢ƒä¿¡æ¯</h2>
      <pre>{JSON.stringify(environment, null, 2)}</pre>
    </div>

    <div class={`status ${hasSupabaseUrl && hasSupabaseKey ? 'success' : 'error'}`}>
      <h2>ğŸ”‘ ç¯å¢ƒå˜é‡æ£€æŸ¥</h2>
      <p><strong>Supabase URL:</strong> {hasSupabaseUrl ? 'âœ… å·²é…ç½®' : 'âŒ ç¼ºå¤±'}</p>
      <p><strong>Supabase Key:</strong> {hasSupabaseKey ? 'âœ… å·²é…ç½®' : 'âŒ ç¼ºå¤±'}</p>
    </div>

    <div class="status info">
      <h2>ğŸ“ æµ‹è¯•è¯´æ˜</h2>
      <p>å¦‚æœä½ èƒ½çœ‹åˆ°è¿™ä¸ªé¡µé¢ï¼Œè¯´æ˜ï¼š</p>
      <ul>
        <li>Vercel Serverless å‡½æ•°æ­£å¸¸å·¥ä½œ</li>
        <li>Astro SSR æ¸²æŸ“æ­£å¸¸</li>
        <li>åŸºæœ¬çš„ç¯å¢ƒå˜é‡è®¿é—®æ­£å¸¸</li>
      </ul>
      <p><a href="/" style="color: #06f;">è¿”å›ä¸»é¡µ</a></p>
    </div>
  </body>
</html>